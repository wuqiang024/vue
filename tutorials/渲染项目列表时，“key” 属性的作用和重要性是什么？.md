# 渲染项目列表时，“key” 属性的作用和重要性是什么？
渲染项目列表时，key属性允许vue跟踪每个Vnode。key值必须是唯一的。

如果没有使用key属性，并且列表的内容发生了改变(例如对列表进行排序),则虚拟Dom宁愿使用更新的数据来修补节点，来反应更改，而不是上下移动元素，这是默认模式，非常有效。

当提供唯一的键值时，将根据对键的更改对元素进行重新排序(并且不使用新数据对他们进行修补),如果删除了key(例如，删除列表中的项目时)，则对应的元素节点也被销毁或删除。

![https://user-gold-cdn.xitu.io/2019/12/2/16ec5d141612999a?imageView2/0/w/1280/h/960/format/webp/ignore-error/1](https://user-gold-cdn.xitu.io/2019/12/2/16ec5d141612999a?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)

这里有一个父组件渲染一个子组件列表。我们看到三个列表项被渲染为三个子组件节点。这些子组件都包含一个span标记和一个输入框，可能还包含一个本地状态对象(可选)。现在我们来检查两种情况。

当不使用key属性时: 例如如果列表已经重新排序，则Vue会使用重新排序的数据简单的修补已经存在的三个节点，而不用移动这些节点。因此假设用户输入了组件编号为3的输入框，重新排序列表后，组件编号为3的span标签内容将被更改，但是输入框将与用户键入的内容及状态数据一起保留在这里。这是因为Vue无法识别组件编号3，他只是重新修补他所看到的更新数据，即span标签的内容。

当在子组件上使用key属性时，Vue会知道该组件的身份，并且在对列表进行重新排序时，将移动节点而不是对其进行修补。这能够确保手动编辑的输入框以及整个组件移动到新位置。

在有条件地渲染组件或元素时，还可以用key属性来向Vue发出有关元素唯一性的信号，并确保元素不会被新数据重新修补。